services:
  - docker

os:
  - linux

dist: trusty
sudo: required

jobs:
  include:
    - stage: build and test
    if: type = pull_request
    language: node_js
    node_js:
      - '9'
      - '8'
    cache:
      yarn: true
    before_install:
      - curl -o- -L https://yarnpkg.com/install.sh | bash
      - export PATH=$HOME/.yarn/bin:$PATH
    install:
      - yarn
    script:
      - yarn lint
      - yarn build
    notifications:
      email:
        on_failure: change


